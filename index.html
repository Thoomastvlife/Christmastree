<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>浪漫聖誕樹</title>
    <style>
        body {
            background-color: #000a00;
            margin: 0;
            overflow: hidden;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            height: 100vh;
            perspective: 1200px;
        }

        /* 旋轉容器：確保高度與樹一致，並將旋轉中心設在樹中心 */
        .tree-container {
            position: relative;
            width: 300px;
            height: 450px;
            transform-style: preserve-3d;
            animation: rotateTree 12s infinite linear;
            margin-bottom: 50px;
        }

        @keyframes rotateTree {
            from { transform: rotateY(0deg); }
            to { transform: rotateY(360deg); }
        }

        .dot {
            position: absolute;
            width: 5px;
            height: 5px;
            border-radius: 50%;
            /* 讓光點有發光感 */
            box-shadow: 0 0 8px 1px white;
        }

        /* 修正星星位置，確保在最頂端 */
        .star {
            position: absolute;
            top: -40px;
            left: 50%;
            transform: translateX(-50%) translateZ(0px);
            color: gold;
            font-size: 50px;
            filter: drop-shadow(0 0 15px gold);
            z-index: 100;
        }

        .message {
            text-align: center;
            color: white;
            font-family: 'Microsoft JhengHei', sans-serif;
            z-index: 10;
        }

        h1 { font-size: 2em; margin: 0; color: #ff4d4d; text-shadow: 0 0 10px #fff; }

        .snow {
            position: absolute;
            top: -10px;
            color: white;
            pointer-events: none;
            animation: fall linear forwards;
        }

        @keyframes fall {
            to { transform: translateY(110vh); }
        }
    </style>
</head>
<body>

    <div class="tree-container" id="tree">
        <div class="star">★</div>
        </div>

    <div class="message">
        <h1>Merry Christmas</h1>
        <p>這是一份專屬你的聖誕驚喜</p>
    </div>

    <script>
        const treeContainer = document.getElementById('tree');
        const dotsCount = 250; 

        for (let i = 0; i < dotsCount; i++) {
            const dot = document.createElement('div');
            dot.className = 'dot';
            
            // --- 修正邏輯 ---
            // i=0 是樹頂，i=250 是樹底
            // 高度 y 從 0 (頂) 增加到 400 (底)
            const y = i * 1.6; 
            // 半徑 radius 從 0 (頂) 增加到 120 (底)
            const radius = i * 0.5; 
            // 旋轉角度
            const angle = i * 0.25; 
            
            const x = Math.cos(angle) * radius;
            const z = Math.sin(angle) * radius;
            
            // 隨機顏色
            const colors = ['#ff0000', '#228b22', '#ffffff', '#ffeb3b', '#00ff00'];
            dot.style.background = colors[Math.floor(Math.random() * colors.length)];
            
            // 座標偏移：讓中心點對準容器中心
            dot.style.transform = `translate3d(${x + 150}px, ${y}px, ${z}px)`;
            treeContainer.appendChild(dot);
        }

        // 雪花系統
        function createSnow() {
            const snow = document.createElement('div');
            snow.className = 'snow';
            snow.innerText = '❄';
            snow.style.left = Math.random() * 100 + 'vw';
            snow.style.fontSize = (Math.random() * 10 + 10) + 'px';
            snow.style.opacity = Math.random();
            snow.style.animationDuration = (Math.random() * 3 + 4) + 's';
            document.body.appendChild(snow);
            setTimeout(() => { snow.remove(); }, 6000);
        }
        setInterval(createSnow, 150);
    </script>
</body>
</html>
